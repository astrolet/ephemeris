#!/bin/bash

# http://stackoverflow.com/questions/192249/
for i in "$@"; do
  case $i in
    -v|--verbose)
    VERBOSE=YES
    shift
    ;;
    *)
    # options for Precompile ...
    ;;
  esac
done

vecho() {
  if [[ $VERBOSE == "YES" ]]; then
    echo "$1"
  fi
}

vecho "precompile step"

if [ ! -d "src/java/swisseph" ]; then
  pushd "src/java/th-mack"
  vecho "precompiling ..."
  javac Precompile.java
  java Precompile -qfc -iswesrc -iprogs -DTRANSITS
  cp -r swisseph ../swisseph
  javac Swetest.java
  javac Transits.java
  popd
else
  vecho "swisseph already exists"
  vecho "skipping precompilation"
fi

vecho "precompile done"
